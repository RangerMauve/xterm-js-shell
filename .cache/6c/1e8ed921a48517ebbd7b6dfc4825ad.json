{"id":"S3PC","dependencies":[{"name":"C:\\Users\\Mauve\\programming\\xterm-js-shell\\package.json","includedInParent":true,"mtime":1555944525666},{"name":"local-echo","loc":{"line":1,"column":32},"parent":"C:\\Users\\Mauve\\programming\\xterm-js-shell\\index.js","resolved":"C:\\Users\\Mauve\\programming\\xterm-js-shell\\node_modules\\local-echo\\index.js"},{"name":"chalk","loc":{"line":5,"column":22},"parent":"C:\\Users\\Mauve\\programming\\xterm-js-shell\\index.js","resolved":"C:\\Users\\Mauve\\programming\\xterm-js-shell\\node_modules\\chalk\\index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var t=e(require(\"local-echo\"));function e(t){return t&&t.__esModule?t:{default:t}}console.log(t.default);const s=require(\"chalk\"),r=t=>`Command Not Found: ${t}`,a=t=>`Command Already Registered: ${t}`,h=/[\\s\\r\\n]+/g,i=s.reset;class n{constructor(e){this.prompt=this.color.yellow(\"> \"),this.commands=new Map,this.echo=new t.default(e),this.attached=!0,this.echo.addAutocompleteHandler(this.autoCompleteCommands.bind(this))}detach(){this.attached&&(this.echo.detach(),this.attached=!1)}attach(){this.attached||(this.echo.attach(),this.attached=!0)}get color(){return s}async repl(){const t=await this.echo.read(this.prompt),[e,...s]=t.split(h);try{await this.run(e,s)}catch(r){console.error(r),await this.echo.println(r.message)}this.repl()}async run(t,e){const s=this.commands.get(t);if(!s)return new TypeError(r(t));const a=new o(this);await s(a,e),a.destroy()}command(t,e){return this.commands.has(t)&&console.warn(a(t)),this.commands.set(t,e),this}autoCompleteCommands(t,e){return 0===t?[...this.commands.values()]:[]}async readChar(t){return this.echo.readChar(t)}async readLine(t){return this.echo.read(t)}async abortRead(t){return this.echo.abortRead(t)}async print(t){return this.echo.print(t)}async printLine(t){return this.echo.println(t)}async printList(t){return this.echo.printWide(t)}}exports.default=n;class o{constructor(t){this.shell=t,this.destroyed=!1}async readChar(t){return this.checkDestroyed(),this.shell.readChar(t)}async readLine(t){return this.checkDestroyed(),this.shell.readLine(t)}async abortRead(t){return this.checkDestroyed(),this.shell.abortRead(t)}async print(t){this.checkDestroyed(),this.shell.print(t)}async printLine(t){this.checkDestroyed(),this.shell.printLine(t)}async printList(t){this.checkDestroyed(),this.shell.printList(t)}get color(){return s}checkDestroyed(){if(this.destroyed)throw new Error(\"Terminal destroyed\")}destroy(){this.destroyed=!0}}"},"sourceMaps":{"js":{"mappings":[{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":0}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":13}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":20}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":35}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":43}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":56}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":57}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":64}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":68}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":76}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":89}},{"source":"../index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":91}},{"source":"../index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":95}},{"source":"../index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"../index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":99}},{"source":"../index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":107}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":122}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":131}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":133}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":136}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":143}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":146}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":148}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":159}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":161}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":162}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":170}},{"source":"../index.js","name":"console","original":{"line":3,"column":0},"generated":{"line":1,"column":173}},{"source":"../index.js","name":"log","original":{"line":3,"column":8},"generated":{"line":1,"column":181}},{"source":"../index.js","name":"LocalEchoController","original":{"line":3,"column":12},"generated":{"line":1,"column":185}},{"source":"../index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":187}},{"source":"../index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":196}},{"source":"../index.js","name":"chalk","original":{"line":5,"column":6},"generated":{"line":1,"column":202}},{"source":"../index.js","name":"require","original":{"line":5,"column":14},"generated":{"line":1,"column":204}},{"source":"../index.js","original":{"line":5,"column":22},"generated":{"line":1,"column":212}},{"source":"../index.js","name":"ERROR_NOT_FOUND","original":{"line":7,"column":6},"generated":{"line":1,"column":221}},{"source":"../index.js","name":"command","original":{"line":7,"column":25},"generated":{"line":1,"column":223}},{"source":"../index.js","name":"command","original":{"line":7,"column":59},"generated":{"line":1,"column":248}},{"source":"../index.js","name":"ERROR_ALREADY_REGISTERED","original":{"line":8,"column":6},"generated":{"line":1,"column":252}},{"source":"../index.js","name":"command","original":{"line":8,"column":34},"generated":{"line":1,"column":254}},{"source":"../index.js","name":"command","original":{"line":8,"column":77},"generated":{"line":1,"column":288}},{"source":"../index.js","name":"WHITESPACE_REGEX","original":{"line":10,"column":6},"generated":{"line":1,"column":292}},{"source":"../index.js","original":{"line":10,"column":25},"generated":{"line":1,"column":294}},{"source":"../index.js","name":"RESET","original":{"line":11,"column":6},"generated":{"line":1,"column":307}},{"source":"../index.js","name":"chalk","original":{"line":11,"column":14},"generated":{"line":1,"column":309}},{"source":"../index.js","name":"reset","original":{"line":11,"column":20},"generated":{"line":1,"column":311}},{"source":"../index.js","original":{"line":21,"column":15},"generated":{"line":1,"column":317}},{"source":"../index.js","name":"XtermJSShell","original":{"line":21,"column":21},"generated":{"line":1,"column":323}},{"source":"../index.js","name":"constructor","original":{"line":26,"column":2},"generated":{"line":1,"column":325}},{"source":"../index.js","name":"term","original":{"line":26,"column":15},"generated":{"line":1,"column":337}},{"source":"../index.js","name":"prompt","original":{"line":27,"column":9},"generated":{"line":1,"column":340}},{"source":"../index.js","name":"prompt","original":{"line":27,"column":9},"generated":{"line":1,"column":345}},{"source":"../index.js","original":{"line":27,"column":18},"generated":{"line":1,"column":352}},{"source":"../index.js","name":"color","original":{"line":27,"column":23},"generated":{"line":1,"column":357}},{"source":"../index.js","name":"yellow","original":{"line":27,"column":29},"generated":{"line":1,"column":363}},{"source":"../index.js","original":{"line":27,"column":36},"generated":{"line":1,"column":370}},{"source":"../index.js","name":"commands","original":{"line":28,"column":9},"generated":{"line":1,"column":376}},{"source":"../index.js","name":"commands","original":{"line":28,"column":9},"generated":{"line":1,"column":381}},{"source":"../index.js","original":{"line":28,"column":20},"generated":{"line":1,"column":390}},{"source":"../index.js","name":"Map","original":{"line":28,"column":24},"generated":{"line":1,"column":394}},{"source":"../index.js","name":"echo","original":{"line":29,"column":9},"generated":{"line":1,"column":398}},{"source":"../index.js","name":"echo","original":{"line":29,"column":9},"generated":{"line":1,"column":403}},{"source":"../index.js","original":{"line":29,"column":16},"generated":{"line":1,"column":408}},{"source":"../index.js","name":"LocalEchoController","original":{"line":29,"column":20},"generated":{"line":1,"column":412}},{"source":"../index.js","original":{"line":29,"column":16},"generated":{"line":1,"column":414}},{"source":"../index.js","name":"term","original":{"line":29,"column":40},"generated":{"line":1,"column":422}},{"source":"../index.js","name":"attached","original":{"line":31,"column":9},"generated":{"line":1,"column":425}},{"source":"../index.js","name":"attached","original":{"line":31,"column":9},"generated":{"line":1,"column":430}},{"source":"../index.js","original":{"line":31,"column":20},"generated":{"line":1,"column":440}},{"source":"../index.js","name":"echo","original":{"line":33,"column":9},"generated":{"line":1,"column":442}},{"source":"../index.js","name":"echo","original":{"line":33,"column":9},"generated":{"line":1,"column":447}},{"source":"../index.js","name":"addAutocompleteHandler","original":{"line":33,"column":14},"generated":{"line":1,"column":452}},{"source":"../index.js","original":{"line":33,"column":37},"generated":{"line":1,"column":475}},{"source":"../index.js","name":"autoCompleteCommands","original":{"line":33,"column":42},"generated":{"line":1,"column":480}},{"source":"../index.js","name":"bind","original":{"line":33,"column":63},"generated":{"line":1,"column":501}},{"source":"../index.js","original":{"line":33,"column":68},"generated":{"line":1,"column":506}},{"source":"../index.js","name":"detach","original":{"line":39,"column":2},"generated":{"line":1,"column":513}},{"source":"../index.js","original":{"line":40,"column":9},"generated":{"line":1,"column":522}},{"source":"../index.js","name":"attached","original":{"line":40,"column":14},"generated":{"line":1,"column":527}},{"source":"../index.js","name":"echo","original":{"line":41,"column":9},"generated":{"line":1,"column":538}},{"source":"../index.js","name":"echo","original":{"line":41,"column":9},"generated":{"line":1,"column":543}},{"source":"../index.js","name":"detach","original":{"line":41,"column":14},"generated":{"line":1,"column":548}},{"source":"../index.js","name":"attached","original":{"line":42,"column":9},"generated":{"line":1,"column":557}},{"source":"../index.js","name":"attached","original":{"line":42,"column":9},"generated":{"line":1,"column":562}},{"source":"../index.js","original":{"line":42,"column":20},"generated":{"line":1,"column":572}},{"source":"../index.js","name":"attach","original":{"line":48,"column":2},"generated":{"line":1,"column":575}},{"source":"../index.js","original":{"line":49,"column":8},"generated":{"line":1,"column":584}},{"source":"../index.js","name":"attached","original":{"line":49,"column":13},"generated":{"line":1,"column":589}},{"source":"../index.js","name":"echo","original":{"line":50,"column":9},"generated":{"line":1,"column":600}},{"source":"../index.js","name":"echo","original":{"line":50,"column":9},"generated":{"line":1,"column":605}},{"source":"../index.js","name":"attach","original":{"line":50,"column":14},"generated":{"line":1,"column":610}},{"source":"../index.js","name":"attached","original":{"line":51,"column":9},"generated":{"line":1,"column":619}},{"source":"../index.js","name":"attached","original":{"line":51,"column":9},"generated":{"line":1,"column":624}},{"source":"../index.js","original":{"line":51,"column":20},"generated":{"line":1,"column":634}},{"source":"../index.js","name":"color","original":{"line":58,"column":6},"generated":{"line":1,"column":637}},{"source":"../index.js","name":"chalk","original":{"line":59,"column":11},"generated":{"line":1,"column":649}},{"source":"../index.js","name":"chalk","original":{"line":59,"column":11},"generated":{"line":1,"column":656}},{"source":"../index.js","name":"repl","original":{"line":66,"column":8},"generated":{"line":1,"column":658}},{"source":"../index.js","name":"line","original":{"line":68,"column":10},"generated":{"line":1,"column":671}},{"source":"../index.js","name":"line","original":{"line":68,"column":10},"generated":{"line":1,"column":677}},{"source":"../index.js","original":{"line":68,"column":23},"generated":{"line":1,"column":685}},{"source":"../index.js","name":"echo","original":{"line":68,"column":28},"generated":{"line":1,"column":690}},{"source":"../index.js","name":"read","original":{"line":68,"column":33},"generated":{"line":1,"column":695}},{"source":"../index.js","original":{"line":68,"column":38},"generated":{"line":1,"column":700}},{"source":"../index.js","name":"prompt","original":{"line":68,"column":43},"generated":{"line":1,"column":705}},{"source":"../index.js","name":"command","original":{"line":70,"column":11},"generated":{"line":1,"column":714}},{"source":"../index.js","name":"args","original":{"line":70,"column":23},"generated":{"line":1,"column":719}},{"source":"../index.js","name":"line","original":{"line":70,"column":31},"generated":{"line":1,"column":722}},{"source":"../index.js","name":"split","original":{"line":70,"column":36},"generated":{"line":1,"column":724}},{"source":"../index.js","name":"WHITESPACE_REGEX","original":{"line":70,"column":42},"generated":{"line":1,"column":730}},{"source":"../index.js","original":{"line":72,"column":8},"generated":{"line":1,"column":733}},{"source":"../index.js","original":{"line":74,"column":12},"generated":{"line":1,"column":743}},{"source":"../index.js","name":"run","original":{"line":74,"column":17},"generated":{"line":1,"column":748}},{"source":"../index.js","name":"command","original":{"line":74,"column":21},"generated":{"line":1,"column":752}},{"source":"../index.js","name":"args","original":{"line":74,"column":30},"generated":{"line":1,"column":754}},{"source":"../index.js","original":{"line":75,"column":6},"generated":{"line":1,"column":757}},{"source":"../index.js","name":"e","original":{"line":75,"column":13},"generated":{"line":1,"column":763}},{"source":"../index.js","name":"console","original":{"line":76,"column":6},"generated":{"line":1,"column":766}},{"source":"../index.js","name":"error","original":{"line":76,"column":14},"generated":{"line":1,"column":774}},{"source":"../index.js","name":"e","original":{"line":76,"column":20},"generated":{"line":1,"column":780}},{"source":"../index.js","original":{"line":77,"column":12},"generated":{"line":1,"column":789}},{"source":"../index.js","name":"echo","original":{"line":77,"column":17},"generated":{"line":1,"column":794}},{"source":"../index.js","name":"println","original":{"line":77,"column":22},"generated":{"line":1,"column":799}},{"source":"../index.js","name":"e","original":{"line":77,"column":30},"generated":{"line":1,"column":807}},{"source":"../index.js","name":"message","original":{"line":77,"column":32},"generated":{"line":1,"column":809}},{"source":"../index.js","name":"repl","original":{"line":81,"column":9},"generated":{"line":1,"column":818}},{"source":"../index.js","name":"repl","original":{"line":81,"column":9},"generated":{"line":1,"column":823}},{"source":"../index.js","name":"run","original":{"line":90,"column":8},"generated":{"line":1,"column":830}},{"source":"../index.js","name":"command","original":{"line":90,"column":13},"generated":{"line":1,"column":840}},{"source":"../index.js","name":"args","original":{"line":90,"column":22},"generated":{"line":1,"column":842}},{"source":"../index.js","name":"fn","original":{"line":91,"column":10},"generated":{"line":1,"column":845}},{"source":"../index.js","name":"fn","original":{"line":91,"column":10},"generated":{"line":1,"column":851}},{"source":"../index.js","original":{"line":91,"column":15},"generated":{"line":1,"column":853}},{"source":"../index.js","name":"commands","original":{"line":91,"column":20},"generated":{"line":1,"column":858}},{"source":"../index.js","name":"get","original":{"line":91,"column":29},"generated":{"line":1,"column":867}},{"source":"../index.js","name":"command","original":{"line":91,"column":33},"generated":{"line":1,"column":871}},{"source":"../index.js","original":{"line":93,"column":8},"generated":{"line":1,"column":874}},{"source":"../index.js","name":"fn","original":{"line":93,"column":9},"generated":{"line":1,"column":878}},{"source":"../index.js","original":{"line":93,"column":13},"generated":{"line":1,"column":880}},{"source":"../index.js","original":{"line":93,"column":20},"generated":{"line":1,"column":887}},{"source":"../index.js","name":"TypeError","original":{"line":93,"column":24},"generated":{"line":1,"column":891}},{"source":"../index.js","name":"ERROR_NOT_FOUND","original":{"line":93,"column":34},"generated":{"line":1,"column":901}},{"source":"../index.js","name":"command","original":{"line":93,"column":50},"generated":{"line":1,"column":903}},{"source":"../index.js","name":"shell","original":{"line":95,"column":10},"generated":{"line":1,"column":907}},{"source":"../index.js","name":"shell","original":{"line":95,"column":10},"generated":{"line":1,"column":913}},{"source":"../index.js","original":{"line":95,"column":18},"generated":{"line":1,"column":915}},{"source":"../index.js","name":"SubShell","original":{"line":95,"column":22},"generated":{"line":1,"column":919}},{"source":"../index.js","original":{"line":95,"column":31},"generated":{"line":1,"column":921}},{"source":"../index.js","name":"fn","original":{"line":97,"column":10},"generated":{"line":1,"column":933}},{"source":"../index.js","name":"shell","original":{"line":97,"column":13},"generated":{"line":1,"column":935}},{"source":"../index.js","name":"args","original":{"line":97,"column":20},"generated":{"line":1,"column":937}},{"source":"../index.js","name":"shell","original":{"line":99,"column":4},"generated":{"line":1,"column":940}},{"source":"../index.js","name":"destroy","original":{"line":99,"column":10},"generated":{"line":1,"column":942}},{"source":"../index.js","name":"command","original":{"line":108,"column":2},"generated":{"line":1,"column":952}},{"source":"../index.js","name":"command","original":{"line":108,"column":11},"generated":{"line":1,"column":960}},{"source":"../index.js","name":"fn","original":{"line":108,"column":20},"generated":{"line":1,"column":962}},{"source":"../index.js","original":{"line":115,"column":11},"generated":{"line":1,"column":965}},{"source":"../index.js","original":{"line":109,"column":8},"generated":{"line":1,"column":972}},{"source":"../index.js","name":"commands","original":{"line":109,"column":13},"generated":{"line":1,"column":977}},{"source":"../index.js","name":"has","original":{"line":109,"column":22},"generated":{"line":1,"column":986}},{"source":"../index.js","name":"command","original":{"line":109,"column":26},"generated":{"line":1,"column":990}},{"source":"../index.js","name":"console","original":{"line":110,"column":6},"generated":{"line":1,"column":994}},{"source":"../index.js","name":"warn","original":{"line":110,"column":14},"generated":{"line":1,"column":1002}},{"source":"../index.js","name":"ERROR_ALREADY_REGISTERED","original":{"line":110,"column":19},"generated":{"line":1,"column":1007}},{"source":"../index.js","name":"command","original":{"line":110,"column":44},"generated":{"line":1,"column":1009}},{"source":"../index.js","name":"commands","original":{"line":113,"column":9},"generated":{"line":1,"column":1013}},{"source":"../index.js","name":"commands","original":{"line":113,"column":9},"generated":{"line":1,"column":1018}},{"source":"../index.js","name":"set","original":{"line":113,"column":18},"generated":{"line":1,"column":1027}},{"source":"../index.js","name":"command","original":{"line":113,"column":22},"generated":{"line":1,"column":1031}},{"source":"../index.js","name":"fn","original":{"line":113,"column":31},"generated":{"line":1,"column":1033}},{"source":"../index.js","original":{"line":115,"column":11},"generated":{"line":1,"column":1036}},{"source":"../index.js","name":"autoCompleteCommands","original":{"line":119,"column":2},"generated":{"line":1,"column":1041}},{"source":"../index.js","name":"index","original":{"line":119,"column":24},"generated":{"line":1,"column":1062}},{"source":"../index.js","name":"tokens","original":{"line":119,"column":31},"generated":{"line":1,"column":1064}},{"source":"../index.js","name":"index","original":{"line":120,"column":8},"generated":{"line":1,"column":1067}},{"source":"../index.js","original":{"line":120,"column":18},"generated":{"line":1,"column":1074}},{"source":"../index.js","name":"index","original":{"line":120,"column":8},"generated":{"line":1,"column":1078}},{"source":"../index.js","original":{"line":121,"column":13},"generated":{"line":1,"column":1080}},{"source":"../index.js","original":{"line":121,"column":17},"generated":{"line":1,"column":1084}},{"source":"../index.js","name":"commands","original":{"line":121,"column":22},"generated":{"line":1,"column":1089}},{"source":"../index.js","name":"values","original":{"line":121,"column":31},"generated":{"line":1,"column":1098}},{"source":"../index.js","original":{"line":123,"column":13},"generated":{"line":1,"column":1108}},{"source":"../index.js","name":"readChar","original":{"line":127,"column":8},"generated":{"line":1,"column":1111}},{"source":"../index.js","name":"message","original":{"line":127,"column":18},"generated":{"line":1,"column":1126}},{"source":"../index.js","original":{"line":128,"column":11},"generated":{"line":1,"column":1129}},{"source":"../index.js","original":{"line":128,"column":11},"generated":{"line":1,"column":1136}},{"source":"../index.js","name":"echo","original":{"line":128,"column":16},"generated":{"line":1,"column":1141}},{"source":"../index.js","name":"readChar","original":{"line":128,"column":21},"generated":{"line":1,"column":1146}},{"source":"../index.js","name":"message","original":{"line":128,"column":30},"generated":{"line":1,"column":1155}},{"source":"../index.js","name":"readLine","original":{"line":131,"column":8},"generated":{"line":1,"column":1158}},{"source":"../index.js","name":"message","original":{"line":131,"column":18},"generated":{"line":1,"column":1173}},{"source":"../index.js","original":{"line":132,"column":11},"generated":{"line":1,"column":1176}},{"source":"../index.js","original":{"line":132,"column":11},"generated":{"line":1,"column":1183}},{"source":"../index.js","name":"echo","original":{"line":132,"column":16},"generated":{"line":1,"column":1188}},{"source":"../index.js","name":"read","original":{"line":132,"column":21},"generated":{"line":1,"column":1193}},{"source":"../index.js","name":"message","original":{"line":132,"column":26},"generated":{"line":1,"column":1198}},{"source":"../index.js","name":"abortRead","original":{"line":135,"column":8},"generated":{"line":1,"column":1201}},{"source":"../index.js","name":"reason","original":{"line":135,"column":19},"generated":{"line":1,"column":1217}},{"source":"../index.js","original":{"line":136,"column":11},"generated":{"line":1,"column":1220}},{"source":"../index.js","original":{"line":136,"column":11},"generated":{"line":1,"column":1227}},{"source":"../index.js","name":"echo","original":{"line":136,"column":16},"generated":{"line":1,"column":1232}},{"source":"../index.js","name":"abortRead","original":{"line":136,"column":21},"generated":{"line":1,"column":1237}},{"source":"../index.js","name":"reason","original":{"line":136,"column":31},"generated":{"line":1,"column":1247}},{"source":"../index.js","name":"print","original":{"line":139,"column":8},"generated":{"line":1,"column":1250}},{"source":"../index.js","name":"message","original":{"line":139,"column":15},"generated":{"line":1,"column":1262}},{"source":"../index.js","original":{"line":140,"column":11},"generated":{"line":1,"column":1265}},{"source":"../index.js","original":{"line":140,"column":11},"generated":{"line":1,"column":1272}},{"source":"../index.js","name":"echo","original":{"line":140,"column":16},"generated":{"line":1,"column":1277}},{"source":"../index.js","name":"print","original":{"line":140,"column":21},"generated":{"line":1,"column":1282}},{"source":"../index.js","name":"message","original":{"line":140,"column":27},"generated":{"line":1,"column":1288}},{"source":"../index.js","name":"printLine","original":{"line":143,"column":8},"generated":{"line":1,"column":1291}},{"source":"../index.js","name":"message","original":{"line":143,"column":19},"generated":{"line":1,"column":1307}},{"source":"../index.js","original":{"line":144,"column":11},"generated":{"line":1,"column":1310}},{"source":"../index.js","original":{"line":144,"column":11},"generated":{"line":1,"column":1317}},{"source":"../index.js","name":"echo","original":{"line":144,"column":16},"generated":{"line":1,"column":1322}},{"source":"../index.js","name":"println","original":{"line":144,"column":21},"generated":{"line":1,"column":1327}},{"source":"../index.js","name":"message","original":{"line":144,"column":29},"generated":{"line":1,"column":1335}},{"source":"../index.js","name":"printList","original":{"line":147,"column":8},"generated":{"line":1,"column":1338}},{"source":"../index.js","name":"list","original":{"line":147,"column":19},"generated":{"line":1,"column":1354}},{"source":"../index.js","original":{"line":148,"column":11},"generated":{"line":1,"column":1357}},{"source":"../index.js","original":{"line":148,"column":11},"generated":{"line":1,"column":1364}},{"source":"../index.js","name":"echo","original":{"line":148,"column":16},"generated":{"line":1,"column":1369}},{"source":"../index.js","name":"printWide","original":{"line":148,"column":21},"generated":{"line":1,"column":1374}},{"source":"../index.js","name":"list","original":{"line":148,"column":31},"generated":{"line":1,"column":1384}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":1388}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":1396}},{"source":"../index.js","original":{"line":152,"column":15},"generated":{"line":1,"column":1404}},{"source":"../index.js","original":{"line":152,"column":0},"generated":{"line":1,"column":1406}},{"source":"../index.js","name":"SubShell","original":{"line":152,"column":6},"generated":{"line":1,"column":1412}},{"source":"../index.js","name":"constructor","original":{"line":153,"column":2},"generated":{"line":1,"column":1414}},{"source":"../index.js","name":"shell","original":{"line":153,"column":15},"generated":{"line":1,"column":1426}},{"source":"../index.js","name":"shell","original":{"line":154,"column":9},"generated":{"line":1,"column":1429}},{"source":"../index.js","name":"shell","original":{"line":154,"column":9},"generated":{"line":1,"column":1434}},{"source":"../index.js","name":"shell","original":{"line":154,"column":17},"generated":{"line":1,"column":1440}},{"source":"../index.js","name":"destroyed","original":{"line":155,"column":9},"generated":{"line":1,"column":1442}},{"source":"../index.js","name":"destroyed","original":{"line":155,"column":9},"generated":{"line":1,"column":1447}},{"source":"../index.js","original":{"line":155,"column":21},"generated":{"line":1,"column":1458}},{"source":"../index.js","name":"readChar","original":{"line":158,"column":8},"generated":{"line":1,"column":1460}},{"source":"../index.js","name":"message","original":{"line":158,"column":18},"generated":{"line":1,"column":1475}},{"source":"../index.js","original":{"line":160,"column":11},"generated":{"line":1,"column":1478}},{"source":"../index.js","name":"checkDestroyed","original":{"line":159,"column":9},"generated":{"line":1,"column":1485}},{"source":"../index.js","name":"checkDestroyed","original":{"line":159,"column":9},"generated":{"line":1,"column":1490}},{"source":"../index.js","original":{"line":160,"column":11},"generated":{"line":1,"column":1507}},{"source":"../index.js","name":"shell","original":{"line":160,"column":16},"generated":{"line":1,"column":1512}},{"source":"../index.js","name":"readChar","original":{"line":160,"column":22},"generated":{"line":1,"column":1518}},{"source":"../index.js","name":"message","original":{"line":160,"column":31},"generated":{"line":1,"column":1527}},{"source":"../index.js","name":"readLine","original":{"line":163,"column":8},"generated":{"line":1,"column":1530}},{"source":"../index.js","name":"message","original":{"line":163,"column":18},"generated":{"line":1,"column":1545}},{"source":"../index.js","original":{"line":165,"column":11},"generated":{"line":1,"column":1548}},{"source":"../index.js","name":"checkDestroyed","original":{"line":164,"column":9},"generated":{"line":1,"column":1555}},{"source":"../index.js","name":"checkDestroyed","original":{"line":164,"column":9},"generated":{"line":1,"column":1560}},{"source":"../index.js","original":{"line":165,"column":11},"generated":{"line":1,"column":1577}},{"source":"../index.js","name":"shell","original":{"line":165,"column":16},"generated":{"line":1,"column":1582}},{"source":"../index.js","name":"readLine","original":{"line":165,"column":22},"generated":{"line":1,"column":1588}},{"source":"../index.js","name":"message","original":{"line":165,"column":31},"generated":{"line":1,"column":1597}},{"source":"../index.js","name":"abortRead","original":{"line":168,"column":8},"generated":{"line":1,"column":1600}},{"source":"../index.js","name":"reason","original":{"line":168,"column":19},"generated":{"line":1,"column":1616}},{"source":"../index.js","original":{"line":170,"column":11},"generated":{"line":1,"column":1619}},{"source":"../index.js","name":"checkDestroyed","original":{"line":169,"column":9},"generated":{"line":1,"column":1626}},{"source":"../index.js","name":"checkDestroyed","original":{"line":169,"column":9},"generated":{"line":1,"column":1631}},{"source":"../index.js","original":{"line":170,"column":11},"generated":{"line":1,"column":1648}},{"source":"../index.js","name":"shell","original":{"line":170,"column":16},"generated":{"line":1,"column":1653}},{"source":"../index.js","name":"abortRead","original":{"line":170,"column":22},"generated":{"line":1,"column":1659}},{"source":"../index.js","name":"reason","original":{"line":170,"column":32},"generated":{"line":1,"column":1669}},{"source":"../index.js","name":"print","original":{"line":173,"column":8},"generated":{"line":1,"column":1672}},{"source":"../index.js","name":"message","original":{"line":173,"column":15},"generated":{"line":1,"column":1684}},{"source":"../index.js","name":"checkDestroyed","original":{"line":174,"column":9},"generated":{"line":1,"column":1687}},{"source":"../index.js","name":"checkDestroyed","original":{"line":174,"column":9},"generated":{"line":1,"column":1692}},{"source":"../index.js","name":"shell","original":{"line":175,"column":9},"generated":{"line":1,"column":1709}},{"source":"../index.js","name":"shell","original":{"line":175,"column":9},"generated":{"line":1,"column":1714}},{"source":"../index.js","name":"print","original":{"line":175,"column":15},"generated":{"line":1,"column":1720}},{"source":"../index.js","name":"message","original":{"line":175,"column":21},"generated":{"line":1,"column":1726}},{"source":"../index.js","name":"printLine","original":{"line":178,"column":8},"generated":{"line":1,"column":1729}},{"source":"../index.js","name":"message","original":{"line":178,"column":19},"generated":{"line":1,"column":1745}},{"source":"../index.js","name":"checkDestroyed","original":{"line":179,"column":9},"generated":{"line":1,"column":1748}},{"source":"../index.js","name":"checkDestroyed","original":{"line":179,"column":9},"generated":{"line":1,"column":1753}},{"source":"../index.js","name":"shell","original":{"line":180,"column":9},"generated":{"line":1,"column":1770}},{"source":"../index.js","name":"shell","original":{"line":180,"column":9},"generated":{"line":1,"column":1775}},{"source":"../index.js","name":"printLine","original":{"line":180,"column":15},"generated":{"line":1,"column":1781}},{"source":"../index.js","name":"message","original":{"line":180,"column":25},"generated":{"line":1,"column":1791}},{"source":"../index.js","name":"printList","original":{"line":183,"column":8},"generated":{"line":1,"column":1794}},{"source":"../index.js","name":"list","original":{"line":183,"column":19},"generated":{"line":1,"column":1810}},{"source":"../index.js","name":"checkDestroyed","original":{"line":184,"column":9},"generated":{"line":1,"column":1813}},{"source":"../index.js","name":"checkDestroyed","original":{"line":184,"column":9},"generated":{"line":1,"column":1818}},{"source":"../index.js","name":"shell","original":{"line":185,"column":9},"generated":{"line":1,"column":1835}},{"source":"../index.js","name":"shell","original":{"line":185,"column":9},"generated":{"line":1,"column":1840}},{"source":"../index.js","name":"printList","original":{"line":185,"column":15},"generated":{"line":1,"column":1846}},{"source":"../index.js","name":"list","original":{"line":185,"column":25},"generated":{"line":1,"column":1856}},{"source":"../index.js","name":"color","original":{"line":188,"column":6},"generated":{"line":1,"column":1859}},{"source":"../index.js","name":"chalk","original":{"line":189,"column":11},"generated":{"line":1,"column":1871}},{"source":"../index.js","name":"chalk","original":{"line":189,"column":11},"generated":{"line":1,"column":1878}},{"source":"../index.js","name":"checkDestroyed","original":{"line":192,"column":2},"generated":{"line":1,"column":1880}},{"source":"../index.js","original":{"line":193,"column":8},"generated":{"line":1,"column":1897}},{"source":"../index.js","original":{"line":193,"column":8},"generated":{"line":1,"column":1900}},{"source":"../index.js","name":"destroyed","original":{"line":193,"column":13},"generated":{"line":1,"column":1905}},{"source":"../index.js","original":{"line":193,"column":24},"generated":{"line":1,"column":1915}},{"source":"../index.js","original":{"line":193,"column":30},"generated":{"line":1,"column":1921}},{"source":"../index.js","name":"Error","original":{"line":193,"column":34},"generated":{"line":1,"column":1925}},{"source":"../index.js","original":{"line":193,"column":40},"generated":{"line":1,"column":1931}},{"source":"../index.js","name":"destroy","original":{"line":196,"column":2},"generated":{"line":1,"column":1953}},{"source":"../index.js","name":"destroyed","original":{"line":197,"column":9},"generated":{"line":1,"column":1963}},{"source":"../index.js","name":"destroyed","original":{"line":197,"column":9},"generated":{"line":1,"column":1968}},{"source":"../index.js","original":{"line":197,"column":21},"generated":{"line":1,"column":1979}}],"sources":{"../index.js":"import LocalEchoController from 'local-echo'\n\nconsole.log(LocalEchoController)\n\nconst chalk = require('chalk')\n\nconst ERROR_NOT_FOUND = (command) => `Command Not Found: ${command}`\nconst ERROR_ALREADY_REGISTERED = (command) => `Command Already Registered: ${command}`\n\nconst WHITESPACE_REGEX = /[\\s\\r\\n]+/g\nconst RESET = chalk.reset\n\n/**\n * Command structure\n * @callback Command\n * @param {SubShell} shell Shell instance for input/output\n * @param {Array<string>} args Arguments for the command\n */\n\n/** Shell abstraction for Xterm.js */\nexport default class XtermJSShell {\n  /**\n   * Instantiate and attach a shell to the terminal\n   * @param {Terminal} term The xterm.js terminal\n   */\n  constructor (term) {\n    this.prompt = this.color.yellow('> ')\n    this.commands = new Map()\n    this.echo = new LocalEchoController(term)\n\n    this.attached = true\n\n    this.echo.addAutocompleteHandler(this.autoCompleteCommands.bind(this))\n  }\n\n  /**\n   * Detach the shell from xtermjs\n   */\n  detach () {\n    if (!this.attached) return\n    this.echo.detach()\n    this.attached = false\n  }\n\n  /**\n   * Attach the shell to the terminal\n   */\n  attach () {\n    if (this.attached) return\n    this.echo.attach()\n    this.attached = true\n  }\n\n  /**\n   * Utility for getting\n   * @return {chalk} A [chalk](https://www.npmjs.com/package/chalk) instance\n   */\n  get color () {\n    return chalk\n  }\n\n  /**\n   * Read-eval-print-loop, run this to start the shell\n   * @return {Promise} Resolves after a pass of the loop finishes\n   */\n  async repl () {\n    // Read\n    const line = await this.echo.read(this.prompt)\n\n    const [command, ...args] = line.split(WHITESPACE_REGEX)\n\n    try {\n      // Eval / Print\n      await this.run(command, args)\n    } catch (e) {\n      console.error(e)\n      await this.echo.println(e.message)\n    }\n\n    // Loop\n    this.repl()\n  }\n\n  /**\n   * Run a command in the shell\n   * @param  {string}         command The name of the command to run\n   * @param  {Array<string>}  args    The list of command arguments to run\n   * @return {Promise}                Resolves after the command has finished\n   */\n  async run (command, args) {\n    const fn = this.commands.get(command)\n\n    if (!fn) return new TypeError(ERROR_NOT_FOUND(command))\n\n    const shell = new SubShell(this)\n\n    await fn(shell, args)\n\n    shell.destroy()\n  }\n\n  /**\n   * Add a command to the shell\n   * @param  {string}        command The name of the command\n   * @param  {Command}      fn      Async function that takes a shell / args\n   * @return {XtermJSShell}          Returns self for chaining\n   */\n  command (command, fn) {\n    if (this.commands.has(command)) {\n      console.warn(ERROR_ALREADY_REGISTERED(command))\n    }\n\n    this.commands.set(command, fn)\n\n    return this\n  }\n\n  // Internal command for auto completion of command names\n  autoCompleteCommands (index, tokens) {\n    if (index === 0) {\n      return [...this.commands.values()]\n    } else {\n      return []\n    }\n  }\n\n  async readChar (message) {\n    return this.echo.readChar(message)\n  }\n\n  async readLine (message) {\n    return this.echo.read(message)\n  }\n\n  async abortRead (reason) {\n    return this.echo.abortRead(reason)\n  }\n\n  async print (message) {\n    return this.echo.print(message)\n  }\n\n  async printLine (message) {\n    return this.echo.println(message)\n  }\n\n  async printList (list) {\n    return this.echo.printWide(list)\n  }\n}\n\nclass SubShell {\n  constructor (shell) {\n    this.shell = shell\n    this.destroyed = false\n  }\n\n  async readChar (message) {\n    this.checkDestroyed()\n    return this.shell.readChar(message)\n  }\n\n  async readLine (message) {\n    this.checkDestroyed()\n    return this.shell.readLine(message)\n  }\n\n  async abortRead (reason) {\n    this.checkDestroyed()\n    return this.shell.abortRead(reason)\n  }\n\n  async print (message) {\n    this.checkDestroyed()\n    this.shell.print(message)\n  }\n\n  async printLine (message) {\n    this.checkDestroyed()\n    this.shell.printLine(message)\n  }\n\n  async printList (list) {\n    this.checkDestroyed()\n    this.shell.printList(list)\n  }\n\n  get color () {\n    return chalk\n  }\n\n  checkDestroyed () {\n    if (this.destroyed) throw new Error('Terminal destroyed')\n  }\n\n  destroy () {\n    this.destroyed = true\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"4c8b9b67774b42bbe8ede4da03950ec3","cacheData":{"env":{}}}